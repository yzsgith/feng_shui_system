graph TD
    A[用户输入图像] --> B[数据预处理模块]
    B -->|预处理后的图像张量| C[多模态特征提取引擎]
    C -->|多维度特征向量| D[风水知识规则引擎]
    D -->|各规则得分| E[综合评分系统]
    E -->|综合评分与权重| F[可解释性报告生成]
    F -->|结构化报告| G[输出结果可视化]

    H[风水知识库<br>JSON配置] -->|规则定义与权重| D
    I[模型配置文件<br>YAML格式] -->|模型参数| B
    I -->|模型选择与配置| C

    subgraph 训练流程
        J[标注数据集<br>图像+专家评分] -->|批量数据| K[模型训练<br>train_model.py]
        K -->|训练指标| L[模型评估<br>evaluation.py]
        L -->|性能报告| M[模型部署<br>部署脚本]
    end

    M -->|模型权重文件| C